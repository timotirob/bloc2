= Correction D√©pendances Fonctionnelles et Formes Normales (FN)
:doctype: article
:encoding: utf-8
:lang: fr
:toc: left
:toc-title: Sommaire
:allow-uri-read:
:imagesdir: ./images
== üìù Solutions D√©taill√©es des Exercices

Les solutions ci-dessous suivent une m√©thode de d√©composition pour atteindre la Forme Normale maximale, en justifiant chaque √©tape.

=== Exercice 1 : Professions

* [cite_start]**Probl√®me :** La relation contient un attribut *multivalu√©* ou *r√©p√©t√©*.
* **FN Max. :** **Non normalis√©** (Violation de la 1NF).
* **Correction (1NF) :** La solution consiste √† cr√©er une table d'association pour g√©rer la relation plusieurs-√†-plusieurs entre l'employ√© et la profession.

.D√©composition en 1NF
[cols="3,7", options="header"]
|===
| Relation | Cl√© Primaire (PK)
| EMPLOYE | `*ID_Employe*`
| PROFESSION | `*Code_Profession*`
| EMPLOYE_PROFESSION | `*ID_Employe, Code_Profession*`
|===


=== Exercice 2 : Fournisseurs

*Relation :* `Fournisseur( nom, article, adresse, prix)`.

* **PK :** `(nom, article)`.

* **D√©pendances Fonctionnelles (DF) :**
- (F1) `(nom, article) -> prix`
- (F2) `nom -> adresse`

**FN Max.: 1NF.**

**Non 2NF**.

* **Justification :** L'attribut non-cl√© `adresse` d√©pend seulement d'une **partie de la cl√©** (`nom`) (F2).

.Corrections pour la 2√®me Forme Normale (2NF)
[cols="3,3,4", options="header"]
|===
| Relation | Cl√© Primaire (PK) | Attributs
| **FOURNISSEUR** | `*nom*` | `nom`, `adresse`
| **TARIF** | `*nom, article*` | `nom`, `article`, `prix`
|===

---

=== Exercice 3 : Vin (Gardarin)

[.underline]#Relation# :

* `Localisation( cru, pays, r√©gion, qualit√©)`.
* **PK :** `(cru, pays)`.
* **DFs :** `R√©gion -> Pays`.

**FN Max. : 3NF.**

**Non BCNF**.

* **Justification BCNF :** La DF `R√©gion -> Pays` a pour d√©terminant `R√©gion`, qui n'est pas une cl√© candidate (ne d√©termine pas `cru` ou `qualit√©`).
* **Correction (BCNF) :** Isoler la d√©pendance o√π le d√©terminant n'est pas une cl√©.

.D√©composition en BCNF
[cols="3,3,4", options="header"]
|===
| Relation | Cl√© Primaire (PK) | Attributs
| **CRU** | `*cru, r√©gion*` | `cru`, `r√©gion`, `qualit√©`
| **PAYS_REGION** | `*r√©gion*` | `r√©gion`, `pays`
|===

Justification :

* La table `PAYS_REGION` isole la DF `R√©gion -> Pays`
* La table CRU maintient les autres informations. La cl√© devient `(cru, r√©gion)` car l'attribut `pays` a √©t√© retir√© (il est d√©termin√© par r√©gion).
* L'attribut `qualit√©` est un attribut non-cl√© dans `CRU`.

---

=== Exercice 4 : Recette de cuisine (R. Grin)

[.underline]#Relation# : `R = {NumR, NomR, TypeR, NumI, NomI, Qte}`.

**PK :** `(NumR, NumI)`.

**Liste des DF :**

* (F1) `NumR -> NomR, TypeR`
* (F2) `NumI -> NomI`
* (F3) `NumR, NumI -> Qte`

**D√©composition (3NF) :**
Cette relation est en

* **1NF** mais
* viole la **2NF** (par F1 et F2).

.D√©composition en 3NF  : Recette de Cuisine
[cols="3,3,4", options="header"]
|===
| Relation | Cl√© Primaire (PK) | Attributs
| **RECETTE** | `*NumR*` | `NumR`, `NomR`, `TypeR`
| **INGREDIENT** | `*NumI*` | `NumI`, `NomI`
| **COMPOSITION** | `*NumR, NumI*` | `NumR` (FK), `NumI` (FK), `Qte`
|===

**Critique de la D√©composition Propos√©e** :

* `R4 = (NumR, Ustensile)` est **non pertinent** car l'entit√© `Ustensile` n'est pas justifi√©e par les d√©pendances fonctionnelles initiales .

---

=== Exercice 5 : Bon de Commande

[.underline]#Relation# : `LigneCommande (Num√©ro de commande, Num√©ro de produit, Description, Prix, Quantit√©)`.

* **FN Max.: 1NF.**
* **Non 2NF**.
* **Critique :** Redondance de `Description` et `Prix` pour chaque ligne de commande, risque d'anomalie de mise √† jour.



=== Exercice 6 : Employ√©
.Exercice 6 (Employ√©)
[cols="2,2,2,2,4", options="header"]
|===
| Relation | Cl√© | Autres DF | FN Max. | Raison
| **R1** (Cl√© simple) | `num√©ro employ√©` | Aucune | **3NF** | Cl√© simple, pas de transitive.
| **R2** (Attribut multivalu√©) | N/A | N/A | **Non normalis√©** | N'est pas en 1NF.
| **R3** (DF transitive) | `num√©ro employ√©` | `Code emploi` -> `libell√© emploi` | **2NF** | D√©pendance transitive : `NE` -> `CodeE` -> `Libell√©E` (Non 3NF).
| **R4** (DF partielle) | `(num√©ro employ√©, projet)` | `Num√©ro employ√©` -> `nom employ√©` | **1NF** | D√©pendance partielle : `NE` -> `NomE` (Non 2NF).
|===

=== Exercice 7 : Bon de Commande

Soit le document suivant qui repr√©sente un bon de commande. Produisez le mod√®le relationnel correspondant en **3√®me forme normale**

.Bon de commande
image::ExoBonCommande.png[Bon commande, width=600, align="center"]



.Mod√®le Relationnel en 3NF (Exercice 7)
[cols="3,3,4", options="header"]
|===
| Relation | Cl√© Primaire (PK) | Attributs
| **CLIENT** | `*Num√©ro Client*` | `Num√©ro Client`, `Nom Client`, `Adresse Client`
| **COMMANDE** | `*Num√©ro Commande*` | `Num√©ro Commande`, `Date Commande`, `Num√©ro Client` (FK)
| **PRODUIT** | `*Num√©ro Produit*` | `Num√©ro Produit`, `Description Produit`, `Prix Unitaire`
| **LIGNE_COMMANDE** | `*Num√©ro Commande, Num√©ro Produit*` | `Num√©ro Commande` (FK), `Num√©ro Produit` (FK), `Quantit√©`
|===

=== Exercice 8 : Groupe Musical

**Hypoth√®se PK :** `(Salle, Ann√©e, Groupe)`.

1.  **Extrait 1 :** `(Salle, Ann√©e, Groupe, Genre)`
* **DF :** `Groupe -> Genre`.
* **FN : Non 2NF**. (D√©pendance partielle).
2.  [cite_start]**Extrait 2 :** `(Salle, Ann√©e, Groupe, Spectateurs)`.
* **FN : 3NF**. (Satisfait 2NF et 3NF).

---

=== Exercice 9 : Transport Maritime

**Cl√©s Possibles :** `K = {Bateau, Date arriv√©e}`

* **FN Max. : 3NF.**
* **Non BCNF**.

**Mod√©lisation BCNF :** Isoler les d√©terminants non-cl√©s (`Bateau` et `Identifiant voyage`).

.D√©composition BCNF (Exercice 9)
[cols="3,3,4", options="header"]
|===
| Relation BCNF | Cl√© Primaire (PK) | Attributs
| **BATEAU** | `*Bateau*` | `Bateau`, `type bateau`
| **VOYAGE** | `*Identifiant voyage*` | `Identifiant voyage`, `bateau`, `cargaison`
| **TRANSPORT** | `*Bateau, date arriv√©e*` | `Bateau` (FK), `date arriv√©e`, `identifiant voyage` (FK), `port de destination`
|===


=== Exercice 10 : Gestion des Postes Informatiques (focus 3NF)

**PK :** `NumS√©rie`.

**FN Max.**:

* 2NF.
* **Non 3NF**.

* Justification : ** D√©pendance transitive** `NumS√©rie -> CodeService -> (NomService, NomChef)`

.Mod√®le Relationnel 3NF
[cols="3,3,4", options="header"]
|===
| Relation | Cl√© Primaire (PK) | Attributs
| **POSTE** | `*NumS√©rie*` | `NumS√©rie`, `ID_Utilisateur` (FK), `CodeService` (FK)
| **SERVICE** | `*CodeService*` | `CodeService`, `NomService`, `NomChef`
| **UTILISATEUR** | `*ID_Utilisateur*` | `ID_Utilisateur`, `NomUtilisateur`
|===

=== Exercice 11 : Gestion des Inscriptions aux Modules (focus BCNF)


**PK :** `(ID_Participant, CodeModule)`.

* **FN Max.: 3NF.**
* **Non BCNF**.
* **Justification :** La `DF CodeModule -> NomFormateur (F3)` a un d√©terminant `CodeModule` qui n'est pas une cl√© candidate (violation BCNF).

.Mod√®le Relationnel BCNF
[cols="3,3,4", options="header"]
|===
| Relation BCNF | Cl√© Primaire (PK) | Attributs
| **FORMATEUR_SPECIALITE** | `*NomFormateur*` | `NomFormateur`, `Sp√©cialit√©`
| **MODULE** | `*CodeModule*` | `CodeModule`, `NomFormateur` (FK)
| **INSCRIPTION** | `*ID_Participant, CodeModule*` | `ID_Participant` (FK), `CodeModule` (FK), `DateInscription`
|===

= R√©vision : D√©pendances Fonctionnelles et Formes Normales (FN)
:doctype: article
:encoding: utf-8
:lang: fr
:toc: left
:toc-title: Sommaire
:allow-uri-read:
:imagesdir: ./images

== üéØ Objectifs de la r√©vision
* Mieux appr√©hender le niveau de la mod√©lisation relationnelle
* Comprendre la notion de **D√©pendance Fonctionnelle** (DF).
* Ma√Ætriser les d√©finitions et les crit√®res de la **1√®re, 2√®me, 3√®me Forme Normale** (1NF, 2NF, 3NF).
* Ma√Ætriser la d√©finition et le crit√®re de la **Forme Normale de Boyce-Codd** (BCNF).
* Savoir appliquer la normalisation pour obtenir un Mod√®le Relationnel propre (jusqu'√† 3NF/BCNF).

== üí° Fondements et Terminologie
Un mod√®le de donn√©es relationnel doit √™tre normalis√© pour √©liminer la redondance et les anomalies de mise √† jour (insertion, modification, suppression).

.Niveaux de mod√©lisation (Conceptuel / Logique / Physique)
image::NiveauxMod√©lisations.png[Niveaux de mod√©lisation, width=600, align="center"]

=== D√©finition du mod√®le relationnel

Un mod√®le logique de donn√©es sp√©cifiant un sch√©ma pour une base de donn√©es relationnelle soit : les tables, les champs de chaque table et leurs propri√©t√©s, la cl√© primaire des tables, les cl√©s √©trang√®res assurant les liaisons entre les tables et les contraintes d‚Äôint√©grit√© portant sur ces liaisons

Pertinence du mod√®le relationnel:

* Ind√©pendant du SGBD, tout en √©tant plus proche des tables
* Etape de v√©rification / validation mod√®le
* Typage et estimation volum√©trie de la base
* Pr√©cisions sur les contraintes, notamment UNIQUE et CHECK

=== Vocabulaire

Le sch√©ma suivant illustre les diff√©rents termes utilis√©s pour des m√™mes notions selon le contexte:

.Des termes diff√©rents pour la m√™me notion selon le contexte
image::Vocabulaire.png[Contextes, width=600, align="center"]

=== D√©pendance Fonctionnelle (DF)
Une d√©pendance fonctionnelle, not√©e DETERMINANT -> DEPENDANT, signifie que pour toute valeur de l'attribut ou du groupe d'attributs DETERMINANT (le *d√©terminant*), il existe une seule valeur correspondante pour l'attribut ou le groupe d'attributs DEPENDANT (le *d√©termin√©*).

* *Exemple :* `Num√©ro Employ√©` -> `Nom Employ√©`


=== D√©finition : Cl√© Candidate et Cl√© Primaire
Une **Cl√© Candidate (CC)** est un ensemble minimal d'attributs qui d√©termine tous les autres attributs de la relation.

* *Minimal :* Si on enl√®ve n'importe quel attribut de la cl√© candidate, celle-ci n'est plus une cl√©.
* La **Cl√© Primaire (PK)** est la Cl√© Candidate que le concepteur choisit pour identifier les enregistrements.

==== Dep√©ndance fonctionnelle √©l√©mentaire

Une DF (Attribut1, Attribut2) -> DEPENDANT est √©l√©mentaire si
Attribut1 -> DEPENDANT n‚Äôest pas DF ET
Attribut2 -> DEPENDANT n‚Äôest pas DF

Permet de d√©tecter les probl√®mes de 2√®me Forme Normale

Exemple (C. SOUTOU: demandez moi les scripts si vous ne les retrouvez pas): `( num_pilote,jour ) -> nb_heures_vol est √©l√©mentaire`

==== Dep√©ndance fonctionnelle directe

Une DF DETERMINANT -> DEPENDANT est directe si elle ne peut pas √™tre d√©duite par transitivit√© c‚Äôest √† dire:

- DETERMINANT -> attributX n‚Äôest pas DF OU BIEN
- AttributX -> DEPENDANT n‚Äôest pas DF

Permet de d√©tecter les probl√®mes de 3√®me Forme Normale

Exemple (C. SOUTOU): immatriculation a√©ronef -> nom du constructeur n‚Äôest PAS directe car
immatriculation a√©ronef -> type avion est DIRECTE ET
Type avion -> nom constructeur est aussi DIRECTE


=== Niveau Logique
Le niveau logique se rapproche des tables tout en restant ind√©pendant du Syst√®me de Gestion de Base de Donn√©es (SGBD). C'est √† ce niveau que les Formes Normales sont appliqu√©es.

=== Principes de mod√©lisation
Un mod√®le de donn√©es relationnel doit √™tre normalis√©
La notion de normalisation comporte plusieurs niveaux, appel√©s formes, que nous allons pr√©senter successivement

Chaque forme normale permet de r√©soudre des probl√®mes de mod√©lisation que posent un non respect de ces principes

== ü•á 1√®re Forme Normale (1NF)


Une relation est en **1NF** si et seulement si:

1. Elle poss√®de au moins une clef
2. Tous ses attributs sont *atomiques* (indivisibles)
3. Aucun attribut n'est r√©p√©t√©


=== Probl√®me typique

La relation ci-dessous est-elle en 1√®re forme normale ? Si non, que faut-il faire ?

.Probl√®me de 1√®re Forme Normale
image::PB1NF.png[Contextes, width=600, align="center"]

=== Solution au probl√®me de multivaluation

La solution consiste √† ajouter des relations, c'est √† dire des tables.
Nous obtenons:

* une table Produit
* une table Couleurs
* une table d'association Coloris qui permet les combinaisons de produit et de couleur

.Solution au probl√®me de multivaluation
image::SOL1NF.png[Contextes, width=600, align="center"]


== ü•à 2√®me Forme Normale (2NF)


Une relation en **1NF** est en **2NF** si et seulement si:

*tout attribut non-cl√© est en d√©pendance fonctionnelle compl√®te vis-√†-vis de la cl√© primaire*.


* *R√®gle :* Il ne doit y avoir aucune **d√©pendance fonctionnelle partielle** de la cl√© primaire vers un attribut non-cl√©. (Concerne uniquement les relations avec une cl√© primaire compos√©e).

* Autre r√©daction: tout attribut non clef ne d√©pend pas d‚Äôune partie de la clef

=== Sch√©ma contre exemple

Le sch√©ma ci dessous montre une relation (table) qui est en 1NF mais N'est PAS en 2NF:

.Relation pas en 2NF
image::SchemaNon2NF.png[Contextes, width=600, align="center"]

=== Probl√®me typique (D√©pendance partielle)

Le sch√©ma ci dessous n'est PAS en 2√®me forme normale.

* Pourquoi ?
* Quel probl√®me cela pose t'il ?

.Probl√®me de 2√®me Forme Normale
image::PB2NF.png[Contextes, width=600, align="center"]


=== Solution au probl√®me de 2√®me forme normale

==== Astuce et √† se rappeler
Les probl√®mes de forme normale concernent TOUJOURS une clef primaire compos√©e (identifiant compos√© de plusieurs colonnes)

==== Solution

On d√©place l'attribut Poids de la table d'association vers le Produit: le poids √©tant ind√©pendant du Coloris on respecte ainsi la 2NF

.Solution au probl√®me de d√©pendance partielle
image::SOL2NF.png[Contextes, width=600, align="center"]

== ü•â 3√®me Forme Normale (3NF)


Une relation en **2NF** est en **3NF** si et seulement si *aucun attribut non-cl√© n'est en d√©pendance fonctionnelle transitive vis-√†-vis de la cl√© primaire*.

* *R√®gle :* Il ne doit y avoir aucune d√©pendance d'un attribut non-cl√© vers un autre attribut non-cl√©.

* 2√®me r√©daction possible: tout attribut non clef ne d√©pend pas d‚Äôun autre attribut non clef

* 3√®me r√©daction possible: tout attribut n'appartenant pas √† la cl√© ne d√©pend pas transitivement de la cl√©

Si A -> B et B -> C et que A est la cl√©, alors il y a une **d√©pendance transitive** A -> C via B.

NOTE: La d√©pendance transitive (A -> B -> C) est directement li√©e √† l'**Axiome de Transitivit√© d'Armstrong**. C'est le moyen th√©orique d'expliquer pourquoi, si la cl√© A d√©termine un attribut non-cl√© B, et que B d√©termine un autre non-cl√© C, la connaissance de A suffit √† d√©terminer C via B, cr√©ant la redondance et violant la 3NF.



=== Sch√©ma contre exemple

Le sch√©ma ci dessous montre une relation (table) qui est en 2NF mais N'est PAS en 3NF:

.Relation pas en 3NF
image::SchemaNon3NF.png[Contextes, width=600, align="center"]

=== Illustration

√Ä titre d'illustration, la relation:

`VOITURE (NV, MARQUE, TYPE, PUISSANCE, COULEUR)`

n'est pas en troisi√®me forme normale.

En effet, l'attribut non-cl√© TYPE d√©termine MARQUE et aussi PUISSANCE.

Cette relation peut √™tre d√©compos√©e en deux relations:

`VOITURE (NV, TYPE, COULEUR)`

`MODELE (TYPE, MARQUE, PUISSANCE)`.

=== Probl√®me typique

Le sch√©ma ci dessous n'est PAS en 3√®me forme normale.

* Pourquoi ?
* Quel probl√®me cela pose t'il ?

.Probl√®me de 3√®me Forme Normale
image::PB3NF.png[Contextes, width=600, align="center"]


=== Solution au probl√®me de 3√®me forme normale

==== Astuce et √† se rappeler
Les probl√®mes de forme normale concernent g√©n√©ralement un attribut qui doit √™tre plac√© dans une autre relation (table) qui est √† un niveau plus "agr√©g√©"

==== Solution

On d√©place la Marque dans une autre relation (table)

.Solution au probl√®me de d√©pendance transitive
image::SOL3NF.png[Contextes, width=600, align="center"]


== üëë Forme Normale de Boyce-Codd (BCNF)


Une relation est en **BCNF** si et seulement si elle est en **3NF** *ET* si toute d√©pendance fonctionnelle non triviale A -> B v√©rifie que A est une **cl√© candidate** pour la relation.

* *R√®gle simplifi√©e :* Le seul d√©terminant (partie gauche de la DF) est une cl√© candidate (aucune d√©pendance vers une partie de la clef ne doit exister)

=== Sch√©ma contre exemple

Le sch√©ma ci dessous montre une relation (table) qui est en 3NF mais N'est PAS en BCNF:

.Relation pas en BCNF
image::SchemaNonBCNF.png[Contextes, width=600, align="center"]


=== Cas sp√©cial : 3NF vs BCNF
Une relation est en 3NF, mais pas en BCNF, lorsque l'on a une DF non triviale A -> B o√π A est un d√©terminant non-cl√©, *mais* A fait partie d'une cl√© candidate.

==== D√©finition du Contexte et des Contraintes

Ceci est le cas le plus difficile : la relation ne contient **aucun attribut non-cl√©**, ce qui satisfait *trivialement* la 3√®me Forme Normale, mais elle est d√©composable car un d√©terminant n'est pas une cl√© candidate.

==== Relation Initiale
Nous g√©rons les aides-correcteurs rattach√©s aux cours et aux √©tudiants.

`R = EXAMEN ([.underline]#√âtudiantID#, CoursID, AideCorrecteur)`

==== D√©pendances Fonctionnelles (DF)

.Tableau de l'Exercice : D√©pendances Fonctionnelles (DF)
[cols="3,6,3", options="header"]
|===
| DF | Justification | D√©terminant
| (F1) `√âtudiantID, CoursID` -> `AideCorrecteur` | La paire √âtudiant/Cours a un seul Aide-Correcteur. | {√âtudiantID, CoursID}
| (F2) `AideCorrecteur` -> `CoursID` | Un Aide-Correcteur ne s'occupe que d'un seul cours (Sp√©cialisation). | {AideCorrecteur}
| (F3) `√âtudiantID, AideCorrecteur` -> `CoursID` | Un √©tudiant, pour un Aide-Correcteur donn√©, n'est inscrit qu'√† un seul cours (D√©riv√© de F1 et F2). | {√âtudiantID, AideCorrecteur}
|===

==== Cl√©s Candidates (CC)

.Tableau : Cl√©s Candidates (CC) de la Relation EXAMEN
[cols="5,5", options="header"]
|===
| Cl√© Candidate | Justification
| `K_1 = {√âtudiantID, CoursID}` | D√©termine tous les attributs (via F1).
| `K_2 = {√âtudiantID, AideCorrecteur}` | D√©termine tous les attributs (via F2 et F3).
|===

==== Analyse des Formes Normales

===== Verdict 3NF
* **Attributs Non-Cl√©s :** Aucun. Tous les attributs font partie d'au moins une Cl√© Candidate.
* **Conclusion 3NF :** La r√®gle 3NF (qui ne s'applique qu'aux Attributs Non-Cl√©s) est **RESPECT√âE** par d√©faut.

===== Verdict BCNF
La r√®gle BCNF est viol√©e si un d√©terminant A n'est **PAS** une Cl√© Candidate (CC).

* **DF Violatrice :** (F2) `AideCorrecteur` -> `CoursID`
* **D√©terminant :** `AideCorrecteur`
* **Est-ce une CC ?** Non. (`AideCorrecteur` ne d√©termine pas `√âtudiantID`).
* **Conclusion BCNF :** La relation est **NON BCNF**.

**Le Probl√®me :** L'information de sp√©cialisation de l'aide-correcteur (F2) est stock√©e de mani√®re redondante dans chaque enregistrement d'√©tudiant.

==== D√©composition en BCNF

Nous d√©composons en isolant la DF probl√©matique (F2) du reste de la relation.

.D√©composition Finale en BCNF
[cols="3,3,4", options="header"]
|===
| Relation BCNF | Cl√© Primaire (PK) | Attributs
| **AIDE_COURS** | `_AideCorrecteur_` | `AideCorrecteur`, `CoursID`
| **INSCRIPTION_ETUDIANT** | `_√âtudiantID, AideCorrecteur_` | `√âtudiantID`, `AideCorrecteur` (FK)
|===

.D√©tail de la violation de BCNF
[cols="3,3", options="header"]
|===
| D√©terminant probl√©matique | R√®gle BCNF viol√©e
| {AideCorrecteur}  | Le d√©terminant {AideCorrecteur} n'est pas une cl√© candidate et d√©termine un autre attribut.
|===

== üìù Exercices de Mod√©lisation
=== M√©thodologie
Pour les exercices de normalisation on utilise une **m√©thodologie de d√©composition**.

Cette d√©composition doit garantir deux propri√©t√©s essentielles :

1. **D√©composition sans perte d'information** (Lossless Join Decomposition) : La jointure des relations d√©compos√©es doit redonner la relation initiale (ce qui est toujours le cas si on inclut la cl√© de la DF extraite).

2. **Pr√©servation des d√©pendances** (Dependency Preservation) : Toutes les DF de la relation originale doivent √™tre pr√©serv√©es dans les nouvelles relations (ou par composition).

=== Exercice 1 : Professions

La relation ci dessous est elle en 1√®re forme Normale. Si non, que changer ?

.Profession
image::Exo1.png[Contextes, width=600, align="center"]

=== Exercice 2 : Fournisseurs

Soit la table suivante:

`Fournisseur( nom, article, adresse, prix)` .

La clef primaire est compos√©e, de  nom et article

1. Quelles sont les d√©pendances fonctionnelles ?

2. La table Fournisseur est elle en 2√®me forme normale ?

3. Si non, quelles corrections effectuer pour √™tre en 2 FN ?

=== Exercice 3 : Vin (Gardarin)

Soit la table, concernant le domaine du vin, suivante:

`Localisation( cru, pays, r√©gion, qualit√©)` .

La clef primaire est compos√©e, de  `cru et pays`

Les DF sont les suivantes:

* `(Cru, pays) -> R√©gion`
* `(Cru, pays) -> Qualit√©`   (tr√®s franchouillard)
* `R√©gion -> Pays`

Exemple de cru: Chablis (on en trouve en France dans r√©gion Beaujolais et aux USA r√©gion Californie)

1. Est elle en BCNF ?

2. Si non, comment faire pour respecter la BCNF ?

=== Exercice 4 :  Recette de cuisine (R. Grin)

On souhaite cr√©er une BDD de recette de cuisine:

* Une recette est identifi√©e par son num√©ro.
* Elle a un nom et un type particulier (soupe, entr√©e, dessert, ...).
* Elle utilise un ou plusieurs ingr√©dients (carottes, viande de boeuf, poivre, ...).
* Un ingr√©dient est identifi√© par son num√©ro et a un nom.
* Pour chaque ingr√©dient dans une recette, on pr√©cisera sa quantit√©.

1. Donner la liste des DF (d√©pendances fonctionnelles) pour la relation `R = {NumR, NomR,TypeR, NumI, NomI, Qte}`
2. Proposer une d√©composition de R qui respecte les FN
3. Critiquer la d√©composition d√©composition suivante:

`R1 = (NumR, NomR,TypeR)`

`R2 = (NumR, NumI, Qte)`

`R3 = (NumI, NomI)`

`R4 = (NumR, Ustensile)`


=== Exercice 5 : Ligne de Commande

Une commande est compos√©e de plusieurs lignes de commande avec un produit associ√©.
Soit la relation suivante :

*Relation :* `LigneCommande (Num√©ro de commande, Num√©ro de produit, Description, Prix, Quantit√©)`

a.	Donnez les d√©pendances fonctionnelles (DF) de la relation
b.	Proposez une clef pour cette relation
c.	A quelle forme normale se conforme la relation ?
d.	Critiquez


=== Exercice 6 : Employ√©

Pour chaque relation, donnez la clef et ensuite cat√©gorisez les en:

* non normalis√©,
* 1NF,
* 2NF,
* 3NF:
a.	`Employ√©(num√©ro employ√©, nom employ√©, code emploi)` avec les DF suivantes :
- `Num√©ro employ√© -> nom employ√©`
- `Num√©ro employ√© -> code emploi`

b.	`Employ√©(num√©ro employ√©, nom employ√©, (code emploi, ann√©es embauch√©))` avec les DF suivantes :
- `Num√©ro employ√© -> nom employ√©`
- `(Num√©ro employ√©, code emploi) -> ann√©es embauch√©`

c.	`Employ√©(num√©ro employ√©, nom employ√©, code emploi, libell√© emploi)` avec les DF suivantes :
- `Num√©ro employ√© -> nom employ√©`
- `Num√©ro employ√© -> code emploi`
- `Code emploi-> libell√© emploi`

d.	`Employ√©(num√©ro employ√©, nom employ√©, projet, nombre heures travaill√©)` avec les DF suivantes :
- `Num√©ro employ√© -> nom employ√©`
- `Num√©ro employ√©, projet -> nombre heures travaill√©`


=== Exercice 7 : Bon de Commande

Soit le document suivant qui repr√©sente un bon de commande. Produisez le mod√®le relationnel correspondant en **3√®me forme normale**

.Bon de commande
image::ExoBonCommande.png[Bon commande, width=600, align="center"]


=== Exercice 8 : Groupe Musical

Hypoth√®ses : un groupe musical est associ√© √† un genre de musique. Un groupe ne fait pas plus d‚Äôune s√©rie de concert dans la m√™me salle pour une m√™me ann√©e.

1. Soit l‚Äôextrait de sch√©ma relationnel en extension suivant :

.Groupe concert
image::GroupeMusique1.png[Concert 1, width=600, align="center"]

* La relation est-elle en 2NF (2√®me forme normale) ?
* en 3NF ?
* D√©terminez le(s) DF et la clef pour justifier la r√©ponse.

2. La dynamique des concerts et des groupes a chang√©: voici le nouvel extrait

.Groupe concert modifi√©
image::GroupeMusique2.png[Concert 1, width=600, align="center"]

* La relation modifi√©e est-elle en 2NF ?
* en 3NF ?

=== Exercice 9 : Transport Maritime

Soit la relation suivante :

`TransportMaritime(bateau, type bateau, identifiant voyage, cargaison, port de destination, date arriv√©e)`

Consid√©rant les DF suivantes :

* `Bateau -> type bateau`
* `Identifiant voyage -> (bateau, cargaison)`
* `(Bateau, date arriv√©e) -> (identifiant voyage, port de destination)`

Questions:

1.	Quelles sont les clefs possibles de la relation ?
2.	Proposez une mod√©lisation qui respecte les 3 premi√®res forme normale et BCNF

=== Exercice 10 : Gestion des Postes Informatiques (focus 3NF)

Un √©tablissement g√®re son parc informatique au niveau du poste.

* Chaque Poste est identifi√© par son Num√©ro de S√©rie (NumS√©rie).
* Le poste est attribu√© √† un Utilisateur (ID_Utilisateur).
* L'utilisateur est rattach√© √† un Service (CodeService).
* Chaque service a un Nom de Service unique et est g√©r√© par un Chef de Service (NomChef).

Relation Initiale :

- `Parc (NumS√©rie, ID_Utilisateur, NomUtilisateur, CodeService, NomService, NomChef)`
- D√©pendances Fonctionnelles (DF) :
* `(F1) NumS√©rie -> (ID_Utilisateur, NomUtilisateur, CodeService)`
* `(F2) ID_Utilisateur -> (NomUtilisateur, CodeService)`
* `(F3) CodeService -> (NomService, NomChef)`

Questions :
1. D√©terminez la cl√© primaire de la relation Parc.
2. Quelle est la forme normale maximale atteinte par la relation Parc ?
3. Justifiez votre r√©ponse en identifiant les d√©pendances probl√©matiques.
4. Proposez un mod√®le relationnel en 3√®me Forme Normale (3NF) pour √©viter les anomalies.

(Point cl√© : La d√©pendance transitive `NumS√©rie -> CodeService -> (NomService,NomChef)` viole la 3NF.)

=== Exercice 11 : Gestion des Inscriptions aux Modules (focus BCNF)

Une association de formation g√®re les inscriptions aux modules.

* Un Participant est identifi√© par son ID_Participant.
* Un Module est identifi√© par son CodeModule.
* L'inscription lie un participant √† un module (DateInscription).
* Chaque module est enseign√© par un Formateur (NomFormateur).
* Chaque formateur a une Sp√©cialit√© unique.

* **Contrainte sp√©cifique** : Bien que plusieurs formateurs puissent enseigner un module, pour un module donn√©, le CodeModule d√©termine le NomFormateur principal.

* Et un formateur est rattach√© √† une seule sp√©cialit√©.

[.underline]#Relation Initiale# : `Inscription (ID_Participant, CodeModule, DateInscription, NomFormateur, Sp√©cialit√©)`

[.underline]#D√©pendances Fonctionnelles (DF)#  :
- (F1) `(ID_Participant, CodeModule) -> DateInscription, NomFormateur, Sp√©cialit√©`
- (F2) `NomFormateur $\to$ Sp√©cialit√©`
- (F3) `CodeModule $\to$ NomFormateur`

[.underline]#Questions# :

1. D√©terminez la cl√© primaire de la relation Inscription.
2. Identifiez si la relation est en BCNF.
(Indice : le d√©terminant de F3 n'est pas une cl√© candidate).

3. D√©composez la relation en un mod√®le relationnel qui respecte la Forme Normale de Boyce-Codd (BCNF).

(Point cl√© : La d√©pendance `CodeModule -> NomFormateur` est une d√©pendance entre un non-cl√© (CodeModule est non-cl√© dans la cl√© principale) et un autre non-cl√© (NomFormateur), ce qui est une violation de BCNF. Il faut extraire l'entit√© MODULE et l'entit√© FORMATEUR)

== üßë‚Äçüíª Exercice Type √âtude de Cas : Normalisation UML (2NF et 3NF)

=== Solution (Mod√®le UML Normalis√© en 3NF)

Le mod√®le final s√©pare toutes les d√©pendances fonctionnelles partielles et transitives dans des classes distinctes.

[plantuml, uml-final-normalise, svg]
----
skinparam ClassAttributeIconSize 0

class Fournisseur {
    + idFournisseur (PK)
    + nom
    + categorie
    + RemiseMax
}

class Article {
    + codeArticle (PK)
    + PrixUnitaire
    + NomCategorieArticle
}

class Commande {
    + idCommande (PK)
    + DateCommande
    + idFournisseur (FK)
}

class LigneCommande {
    + idCommande (PK, FK)
    + noLigne (PK)
    + codeArticle (FK)
    + Quantite
}

Fournisseur "1" <-- "N" Commande : passe
Commande "1" --> "N" LigneCommande : contient
Article "1" <-- "N" LigneCommande : est_pour
----